# 计划四：递归与BFS专项训练

## 📋 计划说明

本计划针对递归和广度优先搜索（BFS）进行专项强化训练，这两个知识点是很多同学不熟悉的内容，通过系统训练帮助掌握。

## 🎯 训练目标

- **掌握递归思维**：理解递归的本质，能够设计递归算法
- **理解BFS算法**：掌握BFS的核心思想和实现方法
- **应用递归解决实际问题**：将问题转化为递归形式
- **应用BFS解决图遍历问题**：使用BFS解决连通性、最短路径等问题

## 📚 重点内容

### 一、递归专题（6-7题）

#### 1.1 核心知识点

**递归三要素**：
1. **终止条件**：递归何时结束
2. **递归关系**：如何将大问题分解为小问题
3. **递归调用**：调用自身解决子问题

**递归思维**：
- 将复杂问题分解为相同类型的子问题
- 找到问题的递归结构
- 设计递归函数

#### 1.2 题目类型分布

**基础递归（2题）**：
- 斐波那契数列（递归实现）
- 数字各位之和（递归实现）

**分治递归（2题）**：
- 二分查找（递归实现）
- 快速幂（递归实现）

**回溯递归（2题）**：
- 全排列（递归生成）
- 组合数计算（递归实现）

**递推递归（1题）**：
- 爬楼梯问题（类似斐波那契的递推）

#### 1.3 参考来源

**阶乘**（`guide_of_cumputers/函数题/阶乘.cpp`）：
- 递归终止条件：n == 0 或 n == 1
- 递归关系：fact(n) = n * fact(n-1)
- 递归调用：调用自身

**汉诺塔**（`guide_of_cumputers/函数题/汉诺塔.cpp`）：
- 递归分解：将n个盘子的问题分解为两个n-1的问题
- 递归关系：hanoi(n) = hanoi(n-1) + 移动 + hanoi(n-1)
- 参数传递：from, to, by三个参数

**猴子吃桃（递归）**（`guide_of_cumputers/函数题/教材4-5：递归函数求猴子吃桃.cpp`）：
- 递归终止：n == 1
- 递归关系：tao(n) = tao(n-1) * 2 + 1
- 反向递推：从最后一天向前推

### 二、BFS专题（4-5题）

#### 2.1 核心知识点

**BFS算法**：
- **队列**：使用队列存储待访问节点
- **访问标记**：标记已访问的节点，避免重复访问
- **层次遍历**：按层次访问节点
- **最短路径**：在无权图中，BFS能找到最短路径

**BFS模板**：
```cpp
1. 初始化队列和访问标记
2. 将起始节点入队并标记
3. while (队列非空) {
    4. 取出队首节点
    5. 处理当前节点
    6. 遍历当前节点的所有邻居
    7. 如果邻居未访问，入队并标记
   }
```

#### 2.2 题目类型分布

**基础BFS（2题）**：
- 图的连通性判断（类似海绵城市）
- 最短路径长度（无权图）

**应用BFS（2-3题）**：
- 迷宫最短路径
- 岛屿数量统计（连通块）
- 层次遍历应用

#### 2.3 参考来源

**海绵城市（BFS）**（`guide_of_cumputers/函数题/二维数组（海绵城市）.cpp`）：
- 使用数组模拟队列：`int q[N + 5]`
- 访问标记数组：`int visited[N] = {0}`
- 队列操作：`head`, `tail`指针
- 图表示：邻接矩阵 `a[][N]`
- BFS核心：从start开始，找到end

**关键代码分析**：
```cpp
// 队列初始化
int q[N + 5];
int visited[N] = {0};
int head = 0, tail = 0;

// 起始节点入队
q[tail++] = start;
visited[start] = 1;

// BFS主循环
while (head < tail) {
    int cur = q[head++];  // 出队
    
    if (cur == end) return 1;  // 找到目标
    
    // 遍历邻居
    for (int i = 1; i < N; i++) {
        if (a[cur][i] == 1 && visited[i] == 0) {
            visited[i] = 1;
            q[tail++] = i;  // 入队
        }
    }
}
```

## 📝 题目来源分析

### 递归题目来源

#### 1. 基础递归
- **参考**：阶乘、斐波那契
- **出题思路**：类似的简单递归问题
- **变化**：改变递归关系，但保持简单结构

#### 2. 分治递归
- **参考**：二分查找、快速幂
- **出题思路**：将问题分成两半，递归解决
- **变化**：改变分治的方式

#### 3. 回溯递归
- **参考**：汉诺塔（有回溯思想）
- **出题思路**：生成所有可能的情况
- **变化**：排列、组合等不同问题

#### 4. 递推递归
- **参考**：猴子吃桃
- **出题思路**：反向递推，递归实现
- **变化**：改变递推公式

### BFS题目来源

#### 1. 基础BFS
- **参考**：海绵城市（图的连通性）
- **出题思路**：
  - 判断两点是否连通
  - 计算最短路径长度
  - 变化图的表示方式

#### 2. 应用BFS
- **参考**：海绵城市的BFS实现
- **出题思路**：
  - 迷宫问题（二维网格）
  - 连通块统计
  - 层次遍历
  - 变化应用场景

## 🎯 难度定位

### 递归部分
- **简单（30%）**：基础递归（阶乘、斐波那契）
- **中等（50%）**：分治递归（二分、快速幂）
- **较难（20%）**：回溯递归（排列组合）

### BFS部分
- **简单（30%）**：基础BFS（连通性判断）
- **中等（50%）**：应用BFS（最短路径、迷宫）
- **较难（20%）**：复杂BFS（多状态搜索）

## 📊 题目分布计划

### 递归专题（6-7题）

**基础递归（2题）**：
1. **阶乘**（参考题目）：基础递归结构
2. **斐波那契数列**（新出题）：递归实现斐波那契

**分治递归（2题）**：
3. **二分查找**（新出题）：递归实现二分查找
4. **快速幂**（新出题）：递归实现快速幂

**回溯递归（2题）**：
5. **汉诺塔**（参考题目）：递归分解思想
6. **全排列**（新出题）：递归生成全排列

**递推递归（1题）**：
7. **最大公约数（递归）**（补充题目）：将现有迭代实现改为递归
8. **猴子吃桃（递归）**（参考题目）：递推递归

**可选补充**：
9. **回文数判断（递归）**（补充题目）：将现有迭代改为递归
10. **水仙花数（递归）**（补充题目）：将现有迭代改为递归

### BFS专题（4-5题）

**基础BFS（2题）**：
11. **图的连通性判断**（参考题目：海绵城市）：判断两点是否连通
12. **最短路径长度**（新出题）：计算无权图的最短路径长度

**应用BFS（2-3题）**：
13. **迷宫最短路径**（新出题）：在迷宫中找最短路径
14. **岛屿数量统计**（新出题）：统计连通块数量
15. **层次遍历应用**（新出题，可选）：图的层次遍历

**总计：10-12题**

**题目来源**：
- 参考题目：4题（阶乘、汉诺塔、猴子吃桃、海绵城市）
- 补充题目：2-3题（最大公约数、回文数、水仙花数改为递归）
- 新出题：5-6题（斐波那契、二分查找、快速幂、全排列、迷宫、岛屿等）

## 📑 题目分类说明

### 一、递归专题分类

#### 1. 基础递归类（2题）

**特点**：递归结构简单，直接递归关系，适合入门

| 题目 | 递归关系 | 难度 | 来源 | 核心考查点 |
|------|---------|------|------|-----------|
| 阶乘 | fact(n) = n × fact(n-1) | 简单 | 参考 | 递归三要素、基础递归结构 |
| 斐波那契 | fib(n) = fib(n-1) + fib(n-2) | 简单 | 新出 | 双递归调用、递归终止条件 |

**训练重点**：
- 理解递归三要素（终止条件、递归关系、递归调用）
- 掌握基础递归结构
- 理解递归的执行过程

**适用阶段**：递归入门，建立递归思维

#### 2. 分治递归类（2题）

**特点**：将问题分成两半，递归解决，体现分治思想

| 题目 | 分治方式 | 难度 | 来源 | 核心考查点 |
|------|---------|------|------|-----------|
| 二分查找 | 每次缩小一半搜索范围 | 中等 | 新出 | 分治思想、边界处理 |
| 快速幂 | 将指数分成两半计算 | 中等 | 新出 | 分治优化、递归优化 |

**训练重点**：
- 理解分治思想（分而治之）
- 掌握如何将问题分成子问题
- 理解递归优化（快速幂）

**适用阶段**：掌握基础递归后，学习分治思想

#### 3. 回溯递归类（2题）

**特点**：需要尝试所有可能，回溯到之前状态

| 题目 | 回溯特点 | 难度 | 来源 | 核心考查点 |
|------|---------|------|------|-----------|
| 汉诺塔 | 递归分解，有回溯思想 | 中等偏难 | 参考 | 递归分解、参数传递、递归调用 |
| 全排列 | 尝试所有排列，回溯 | 较难 | 新出 | 回溯思想、状态恢复、递归生成 |

**训练重点**：
- 理解回溯思想（尝试-回溯）
- 掌握状态恢复（回溯时恢复状态）
- 理解递归生成所有可能

**适用阶段**：掌握分治递归后，学习回溯思想

#### 4. 递推递归类（2-3题）

**特点**：从已知状态递推到目标状态，用递归实现递推

| 题目 | 递推关系 | 难度 | 来源 | 核心考查点 |
|------|---------|------|------|-----------|
| 猴子吃桃 | tao(n) = tao(n-1) × 2 + 1 | 中等 | 参考 | 反向递推、递归实现递推 |
| 最大公约数 | gcd(a,b) = gcd(b, a%b) | 中等 | 补充 | 欧几里得算法、递归实现 |
| 回文数判断 | 递归判断首尾字符 | 中等 | 补充 | 字符串递归、双指针递归思想 |
| 水仙花数 | 递归提取各位数字 | 中等 | 补充 | 数字递归分解、递归计算 |

**训练重点**：
- 理解递推关系
- 掌握如何用递归实现递推
- 理解递归分解（数字、字符串）

**适用阶段**：掌握基础递归后，学习递推递归

### 二、BFS专题分类

#### 1. 基础BFS类（2题）

**特点**：标准BFS实现，理解BFS核心思想

| 题目 | BFS应用 | 难度 | 来源 | 核心考查点 |
|------|---------|------|------|-----------|
| 图的连通性判断 | 判断两点是否连通 | 中等 | 参考 | BFS模板、队列实现、访问标记 |
| 最短路径长度 | 计算无权图最短路径 | 中等 | 新出 | BFS层次遍历、距离计算 |

**训练重点**：
- 掌握BFS标准模板
- 理解队列的作用
- 理解访问标记的重要性
- 理解BFS的层次遍历特性

**适用阶段**：BFS入门，建立BFS思维

#### 2. 应用BFS类（2-3题）

**特点**：将BFS应用到具体场景，需要灵活运用BFS

| 题目 | 应用场景 | 难度 | 来源 | 核心考查点 |
|------|---------|------|------|-----------|
| 迷宫最短路径 | 二维网格中的最短路径 | 中等偏难 | 新出 | 二维BFS、方向数组、路径记录 |
| 岛屿数量统计 | 统计连通块数量 | 中等偏难 | 新出 | 多起点BFS、连通块标记 |
| 层次遍历应用 | 图的层次遍历 | 中等 | 新出 | BFS层次特性、层次输出 |

**训练重点**：
- 理解BFS在不同场景的应用
- 掌握二维网格BFS的实现
- 理解多起点BFS
- 灵活运用BFS解决实际问题

**适用阶段**：掌握基础BFS后，学习BFS应用

### 三、按难度分类

#### 简单（3题，25%）

**特点**：递归结构简单，BFS模板应用

**递归部分**：
- 阶乘：基础递归，结构清晰
- 斐波那契：双递归调用，但关系简单

**BFS部分**：
- 图的连通性判断：标准BFS模板

**适合对象**：递归和BFS入门

#### 中等（6题，50%）

**特点**：需要理解算法思想，但实现相对标准

**递归部分**：
- 二分查找：分治思想，边界处理
- 快速幂：分治优化
- 最大公约数：欧几里得算法
- 猴子吃桃：递推递归
- 回文数判断：字符串递归
- 水仙花数：数字递归分解

**BFS部分**：
- 最短路径长度：标准BFS应用
- 层次遍历应用：BFS层次特性

**适合对象**：有一定基础，想深入理解

#### 中等偏难（2题，17%）

**特点**：需要深入理解算法，灵活运用

**递归部分**：
- 汉诺塔：递归分解，参数传递复杂

**BFS部分**：
- 迷宫最短路径：二维BFS，方向处理
- 岛屿数量统计：多起点BFS

**适合对象**：基础扎实，想提升应用能力

#### 较难（1题，8%）

**特点**：需要综合运用多个知识点

**递归部分**：
- 全排列：回溯思想，状态恢复复杂

**适合对象**：想挑战高难度题目

### 四、按题目来源分类

#### 参考题目（4题）

**来源**：`guide_of_cumputers`中的现有题目

**递归部分**：
- **阶乘**：基础递归参考
- **汉诺塔**：递归分解参考
- **猴子吃桃（递归）**：递推递归参考

**BFS部分**：
- **图的连通性判断（海绵城市）**：BFS标准实现参考

**使用方式**：
- 仔细研究参考题目的实现
- 理解核心算法思想
- 作为新题目的设计参考

#### 补充题目（2-3题）

**来源**：将`guide_of_cumputers`中的迭代实现改为递归

**递归部分**：
- **最大公约数（递归）**：原为迭代，改为递归
- **回文数判断（递归）**：原为迭代，改为递归
- **水仙花数（递归）**：原为迭代，改为递归

**使用方式**：
- 对比迭代和递归实现
- 理解递归思维
- 训练递归改写能力

#### 新出题目（5-6题）

**来源**：根据参考题目和知识点设计的新题目

**递归部分**：
- **斐波那契数列**：基础递归应用
- **二分查找**：分治递归应用
- **快速幂**：分治递归优化
- **全排列**：回溯递归应用

**BFS部分**：
- **最短路径长度**：BFS标准应用
- **迷宫最短路径**：二维BFS应用
- **岛屿数量统计**：多起点BFS应用
- **层次遍历应用**：BFS层次特性应用

**使用方式**：
- 保持核心算法思想
- 变化应用场景
- 训练相同的能力

### 五、按训练阶段分类

#### 第一阶段：递归入门（2题）

**目标**：建立递归思维，理解递归三要素

- 阶乘：理解基础递归结构
- 斐波那契：理解双递归调用

**建议**：先做阶乘，再做斐波那契

#### 第二阶段：递推递归（2-3题）

**目标**：学习用递归实现递推

- 猴子吃桃：反向递推
- 最大公约数：欧几里得算法
- 回文数判断或水仙花数（选一个）

**建议**：在掌握基础递归后，学习递推递归

#### 第三阶段：分治递归（2题）

**目标**：学习分治思想

- 二分查找：分治查找
- 快速幂：分治优化

**建议**：理解分治思想，掌握分而治之

#### 第四阶段：回溯递归（2题）

**目标**：学习回溯思想

- 汉诺塔：递归分解（有回溯思想）
- 全排列：完整回溯

**建议**：先做汉诺塔，理解递归分解；再做全排列，理解完整回溯

#### 第五阶段：BFS基础（2题）

**目标**：掌握BFS标准实现

- 图的连通性判断：BFS模板
- 最短路径长度：BFS应用

**建议**：先做连通性判断，理解BFS模板；再做最短路径，理解BFS应用

#### 第六阶段：BFS应用（2-3题）

**目标**：灵活运用BFS

- 迷宫最短路径：二维BFS
- 岛屿数量统计：多起点BFS
- 层次遍历应用（可选）

**建议**：在掌握基础BFS后，学习BFS应用

### 六、按考查能力分类

#### 递归思维能力（7题）

- 阶乘、斐波那契：基础递归思维
- 二分查找、快速幂：分治递归思维
- 汉诺塔、全排列：回溯递归思维
- 猴子吃桃、最大公约数：递推递归思维

#### BFS算法能力（5题）

- 图的连通性判断：BFS模板实现
- 最短路径长度：BFS标准应用
- 迷宫最短路径：二维BFS应用
- 岛屿数量统计：多起点BFS应用
- 层次遍历应用：BFS层次特性

#### 算法改写能力（2-3题）

- 最大公约数：迭代改递归
- 回文数判断：迭代改递归
- 水仙花数：迭代改递归

### 七、题目选择建议

#### 如果时间有限（选择6-7题）

**必做题目**：
1. 阶乘（参考，递归入门）
2. 斐波那契（新出，基础递归）
3. 汉诺塔（参考，递归分解）
4. 最大公约数（补充，递推递归）
5. 图的连通性判断（参考，BFS基础）
6. 迷宫最短路径（新出，BFS应用）

**可选题目**：
7. 二分查找或快速幂（选一个，分治递归）

#### 如果时间充足（全部10-12题）

**建议顺序**：
1. 阶乘 → 2. 斐波那契 → 3. 猴子吃桃 → 4. 最大公约数
5. 回文数判断或水仙花数（选一个）
6. 二分查找 → 7. 快速幂
8. 汉诺塔 → 9. 全排列
10. 图的连通性判断 → 11. 最短路径长度
12. 迷宫最短路径 → 13. 岛屿数量统计 → 14. 层次遍历应用（可选）

#### 如果重点突破某类

**递归专项**：阶乘、斐波那契、猴子吃桃、最大公约数、二分查找、快速幂、汉诺塔、全排列（8题）

**BFS专项**：图的连通性判断、最短路径长度、迷宫最短路径、岛屿数量统计、层次遍历应用（5题）

**递推递归专项**：猴子吃桃、最大公约数、回文数判断、水仙花数（4题）

**分治递归专项**：二分查找、快速幂（2题）

**回溯递归专项**：汉诺塔、全排列（2题）

## 💡 训练建议

### 递归训练建议

1. **理解递归三要素**：
   - 明确终止条件
   - 找到递归关系
   - 正确调用递归

2. **从简单开始**：
   - 先做基础递归（阶乘、斐波那契）
   - 再做分治递归（二分、快速幂）
   - 最后做回溯递归（排列组合）

3. **画递归树**：
   - 画出递归调用过程
   - 理解递归的执行流程
   - 理解递归的返回过程

4. **注意递归深度**：
   - 避免栈溢出
   - 考虑优化（记忆化）

### BFS训练建议

1. **掌握BFS模板**：
   - 队列初始化
   - 访问标记
   - 主循环结构

2. **理解BFS思想**：
   - 层次遍历
   - 最短路径（无权图）
   - 连通性判断

3. **从基础开始**：
   - 先做连通性判断（类似海绵城市）
   - 再做最短路径
   - 最后做复杂应用

4. **注意实现细节**：
   - 队列的实现（数组模拟）
   - 访问标记的正确使用
   - 边界条件处理

## ⚠️ 技术限制

### ✅ 可以使用
- 普通数组：`int a[100][100]`
- 数组模拟队列：`int q[1000]`, `head`, `tail`
- 数组模拟栈：`int stack[1000]`, `top`
- string类基础操作
- 基础算法：自己实现所有算法

### ❌ 禁止使用
- STL容器：vector, map, queue, stack等
- STL算法：sort, find等
- 复杂STL特性

## 📁 文件结构

- `题目/` - 所有题目文件
- `答案/` - 所有答案文件（包含.cpp代码和解析）

## 📝 题目列表

### 递归专题（8题）

#### 基础递归（1题）
1. **题目01**：斐波那契数列 - 基础递归结构、双递归调用
   - 难度：简单
   - 来源：新出题

#### 分治递归（2题）
2. **题目02**：二分查找 - 分治思想、边界处理
   - 难度：中等
   - 来源：新出题

3. **题目03**：快速幂 - 分治优化、模运算
   - 难度：中等
   - 来源：新出题

#### 回溯递归（1题）
4. **题目04**：全排列 - 回溯思想、状态恢复
   - 难度：较难
   - 来源：新出题

#### 递推递归（4题）
5. **题目05**：最大公约数（递归） - 欧几里得算法、递归实现
   - 难度：中等
   - 来源：补充题目

6. **题目06**：回文数判断（递归） - 字符串递归、双指针递归思想
   - 难度：中等
   - 来源：补充题目

7. **题目07**：水仙花数（递归） - 数字递归分解、递归计算
   - 难度：中等
   - 来源：补充题目

8. **参考题目**：猴子吃桃（递归） - 递推递归
   - 位置：`guide_of_cumputers/函数题/教材4-5：递归函数求猴子吃桃.cpp`
   - 说明：作为递推递归的典型参考

#### 其他参考题目
- **阶乘**：`guide_of_cumputers/函数题/阶乘.cpp` - 基础递归参考
- **汉诺塔**：`guide_of_cumputers/函数题/汉诺塔.cpp` - 递归分解参考

### BFS专题（3题）

#### 基础BFS（1题）
9. **题目08**：最短路径长度 - BFS层次遍历、距离计算
   - 难度：中等
   - 来源：新出题

#### 应用BFS（2题）
10. **题目09**：迷宫最短路径 - 二维BFS、方向数组、路径记录
    - 难度：中等偏难
    - 来源：新出题

11. **题目10**：岛屿数量统计 - 多起点BFS、连通块标记
    - 难度：中等偏难
    - 来源：新出题

#### 参考题目
- **图的连通性判断（海绵城市）**：`guide_of_cumputers/函数题/二维数组（海绵城市）.cpp` - BFS标准实现参考

**总计：10道题目 + 4道参考题目 = 14题**

---

**通过本计划的训练，你将能够：**
- ✅ 理解递归的本质，设计递归算法
- ✅ 掌握BFS算法，解决图遍历问题
- ✅ 应用递归解决实际问题
- ✅ 应用BFS解决连通性和最短路径问题

**祝训练顺利！** 🚀

