# 答案11：编程题 - 学生管理系统

## 完整代码

见 `答案11_编程题_学生管理系统.cpp`

## 关键知识点解析

### 1. 抽象基类

```cpp
class Person {
    virtual void display() = 0;  // 纯虚函数
};
```

- **纯虚函数**：使用 `= 0` 声明
- **抽象类**：包含纯虚函数的类不能直接实例化
- **作用**：定义接口，强制派生类实现

### 2. 继承和构造函数初始化列表

```cpp
class Student : public Person {
    Student(string name, int id, int s[]) : Person(name, id) {
        // 初始化派生类成员
    }
};
```

- **调用基类构造函数**：`Person(name, id)`
- **初始化顺序**：先基类，后派生类

### 3. 多态实现

```cpp
Person* persons[10];
persons[0] = new Student(...);
persons[1] = new Teacher(...);

// 多态调用
persons[0]->display();  // 调用Student::display()
persons[1]->display();  // 调用Teacher::display()
```

- **基类指针**：可以指向派生类对象
- **虚函数**：实现运行时多态
- **动态绑定**：根据实际对象类型调用对应函数

### 4. 虚析构函数

```cpp
virtual ~Person() {}
```

- **必要性**：通过基类指针删除派生类对象时，确保调用正确的析构函数
- **调用顺序**：派生类析构函数 → 基类析构函数

### 5. 内存管理

```cpp
// 分配
persons[i] = new Student(...);

// 释放
delete persons[i];
```

- **配对使用**：每个 `new` 都要有对应的 `delete`
- **虚析构函数**：确保正确释放派生类对象

## 测试用例

### 输入
```
2
张三 1001 85 90 88
李四 1002 92 88 95
王老师 2001 8000.5
```

### 输出
```
张三 1001 87.7
李四 1002 91.7
王老师 2001 8000.50
```

## 常见错误

1. **忘记virtual关键字**：多态失效
2. **忘记虚析构函数**：可能导致内存泄漏
3. **忘记释放内存**：内存泄漏
4. **输出格式错误**：小数位数不对

## 扩展思考

1. 如何添加更多派生类（如管理员）？
2. 如何使用vector代替数组？
3. 如何使用智能指针管理内存？

